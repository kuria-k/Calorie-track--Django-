{% extends 'tracker_app/base.html' %}

{% block title %}Food Log{% endblock %}

{% block content %}
<div class="container mx-auto px-5 py-10">
  <h2 class="text-2xl font-bold mb-6">Your Food Entries</h2>

  <table class="min-w-full bg-white rounded shadow-md">
    <thead>
      <tr class="bg-gray-100 text-left text-gray-600 uppercase text-sm leading-normal">
        <th class="py-3 px-6">Date</th>
        <th class="py-3 px-6">Food</th>
        <th class="py-3 px-6">Calories</th>
        <th class="py-3 px-6">Meal</th>
        <th class="py-3 px-6">Action</th>
      </tr>
    </thead>
    <tbody>
      {% for item in items %}
      <tr class="border-b border-gray-200 hover:bg-gray-50">
        <td class="py-3 px-6">{{ item.date }}</td>
        <td class="py-3 px-6">{{ item.name }}</td>
        <td class="py-3 px-6">{{ item.calories }}</td>
        <td class="py-3 px-6">{{ item.meal_type }}</td>
        <td class="py-3 px-6">
          <a href="{% url 'delete_food' item.id %}" onclick="return confirm('Are you sure you want to delete this entry?')" class="text-red-500 hover:underline hover:bg-red-400 hover:text-white p-2 rounded">Delete</a>
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="5" class="text-center py-6 text-gray-500">No entries found.</td>
      </tr>
      {% endfor %}
    </tbody>
    {% if items %}
    <tfoot>
      <tr class="bg-gray-100 font-semibold text-gray-700">
        <td colspan="2" class="py-3 px-6 text-right">Total Calories:</td>
        <td colspan="3" class="py-3 px-6 text-green-500">{{ total_calories }}</td>
      </tr>
    </tfoot>
    {% endif %}
  </table>
</div>
{% endblock %}

